# schemago Roadmap

This roadmap documents planned and completed features for this project.

The format is based on and generated by [Structured Roadmap](https://github.com/grokify/structured-roadmap), which provides a machine-readable JSON intermediate representation with deterministic Markdown generation.

## Overview

**schemago** is a JSON Schema to Go code generator with first-class union type support. Unlike existing generators that degrade `anyOf`/`oneOf` to `interface{}`, schemago produces idiomatic Go code with proper tagged unions, discriminator-based unmarshalling, and nullable pointer types.

---

## Parser

### [ ] $ref resolution

Resolve local and remote $ref references

**Target:** 0.1.0

### [ ] Circular reference handling

Detect and handle circular $ref chains without infinite loops

**Target:** 0.1.0

### [ ] JSON Schema parser integration

Integrate google/jsonschema-go for schema parsing

**Target:** 0.1.0

---

## Intermediate Representation

### [ ] Discriminator detection

Auto-detect discriminator fields from const properties

**Target:** 0.2.0

### [ ] Nullable field handling

Convert anyOf [T, null] to pointer types

**Target:** 0.2.0

### [ ] Schema to IR builder

Convert parsed JSON Schema to Semantic IR

**Target:** 0.1.0

### [ ] Semantic IR type definitions

Define TypeDef, Field, Variant, Discriminator, UnionKind types

**Target:** 0.1.0

### [ ] Union detection algorithm

Detect anyOf/oneOf patterns and classify union types

**Target:** 0.2.0

---

## Linter

### [ ] Check: inconsistent discriminator

Error when variants use different discriminator field names

**Target:** 0.1.0

### [ ] Check: missing const in variant

Error when union variant lacks const value for discriminator

**Target:** 0.1.0

### [ ] Check: union without discriminator

Error when anyOf/oneOf has no const discriminator field

**Target:** 0.1.0

### [ ] Check: additionalProperties on union

Warning when additionalProperties: true may cause ambiguous decoding

**Target:** 0.1.0

### [ ] Check: deeply nested unions

Warning when unions are nested more than 2 levels deep

**Target:** 0.1.0

### [ ] Check: large union warning

Warning when union has more than 10 variants

**Target:** 0.1.0

### [ ] Multiple output formats for lint

Support text, JSON, and GitHub Actions annotation format

**Target:** 0.1.0

---

## Code Generator

### [ ] Basic struct generation

Generate Go structs for object types (no unions yet)

**Target:** 0.1.0

### [ ] Full Agent Spec compatibility

Generate correct code for entire Agent Spec schema

**Target:** 0.4.0

### [ ] JSON struct tags

Generate correct json struct tags including omitempty

**Target:** 0.1.0

### [ ] MarshalJSON generation

Generate custom MarshalJSON for union types

**Target:** 0.2.0

### [ ] Polymorphic union generation

Generate discriminated union types with switch logic

**Target:** 0.2.0

### [ ] Reference union generation

Generate ComponentReference | BaseXxx pattern

**Target:** 0.2.0

### [ ] ReferencedComponents map handling

Handle polymorphic map with 40+ value types

**Target:** 0.4.0

### [ ] UnmarshalJSON generation

Generate custom UnmarshalJSON for union types

**Target:** 0.2.0

### [ ] A2A schema support

Generate Go types for Agent-to-Agent protocol

### [ ] Abstract type interfaces

Generate interfaces for x-abstract-component types

**Target:** 0.4.0

### [ ] Enum type generation

Generate typed consts for enum values

**Target:** 0.3.0

### [ ] MCP schema support

Generate Go types for Model Context Protocol

### [ ] Union helper methods

Generate AsXxx() and IsXxx() helper methods for unions

**Target:** 0.2.0

### [ ] Enum validation methods

Generate IsValid() methods for enum types

**Target:** 0.3.0

### [ ] TypeScript output

Add TypeScript as alternative output language

### [ ] Validation code generation

Generate Validate() methods from schema constraints

---

## CLI

### [ ] `schemago generate` command

Main CLI command to generate Go code from schema

**Target:** 0.3.0

### [ ] `schemago lint` command

Lint JSON Schema for Go compatibility issues

**Target:** 0.1.0

### [ ] Configuration file support

YAML config file for generation options

**Target:** 0.3.0

### [ ] OpenAPI 3.1 wrapper

Tool to extract JSON Schema from OpenAPI and generate

### [ ] `schemago analyze` command

Show detected patterns (unions, enums, discriminators)

**Target:** 0.3.0

### [ ] `schemago validate` command

Validate schema and report unsupported patterns

**Target:** 0.3.0

### [ ] go:generate support

Support //go:generate schemago directive

**Target:** 1.0.0

---

## Testing

### [ ] Compile tests

Verify all generated code compiles successfully

**Target:** 0.4.0

### [ ] Round-trip JSON tests

Verify JSON â†’ Go â†’ JSON produces identical output

**Target:** 0.4.0

### [ ] Lint tests

Verify generated code passes golangci-lint

**Target:** 0.4.0

---

## Distribution

### [ ] Comprehensive documentation

README, examples, API documentation

**Target:** 1.0.0

### [ ] GoReleaser configuration

Multi-platform binary releases

**Target:** 1.0.0

### [ ] Project structure and CI setup

Initialize Go module, directory structure, GitHub Actions CI

**Target:** 0.1.0

### [ ] Homebrew tap

Install via brew install grokify/tap/schemago

**Target:** 1.0.0

---

## Motivation

Modern API specifications like Oracle Agent Spec, MCP, and A2A use complex JSON Schema patterns including union types with discriminators. Existing Go generators cannot handle these correctly, producing code that loses type safety and requires manual type assertions everywhere.

schemago solves this by treating unions as first-class semantic constructs, generating proper tagged union types with custom marshal/unmarshal methods.

## References

- [PRD.md](PRD.md) - Product requirements
- [TRD.md](TRD.md) - Technical requirements
- [Oracle Agent Spec](https://oracle.github.io/agent-spec/) - Primary target schema
- [JSON Schema Draft 2020-12](https://json-schema.org/draft/2020-12/json-schema-core)

---

## Version History

| Version | Date | Status | Summary |
|---------|------|--------|--------|
| 0.1.0 | TBD | ðŸ“‹ | Foundation - parsing, IR, basic structs |
| 0.2.0 | TBD | ðŸ“‹ | Union types with discriminators |
| 0.3.0 | TBD | ðŸ“‹ | CLI and configuration |
| 0.4.0 | TBD | ðŸ“‹ | Full Agent Spec compatibility |
| 1.0.0 | TBD | ðŸ“‹ | Production ready release |
